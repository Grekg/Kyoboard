<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CollabBoard - Marketing Sprint 2024</title>
    <link rel="stylesheet" href="css/global.css" />
    <link rel="stylesheet" href="css/board.css" />
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Kalam:wght@400;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <!-- Top Bar -->
    <header id="top-bar">
      <!-- Left: Logo & Branding -->
      <div class="top-left">
        <a href="index.html" class="brand-link">
          <img
            src="logo2-removebg-preview.png"
            alt="Kyoboard Logo"
            style="height: 32px; margin-right: 0.5rem"
          />
          <span class="brand-name">Kyoboard</span>
        </a>
        <div
          class="divider-v"
          style="height: 20px; margin: 0 1rem; opacity: 0.2"
        ></div>
        <div class="board-meta">
          <span class="meta-label">Workspaces /</span>
          <input
            class="meta-title"
            placeholder="Name your workspace..."
            value=""
          />
        </div>
      </div>

      <!-- Right: Controls -->
      <div class="top-right">
        <button id="btn-share" class="btn-primary">Share</button>

        <div class="icon-group">
          <button class="icon-btn" title="Notifications">
            <span class="material-icons-outlined">notifications</span>
            <span class="badge-dot"></span>
          </button>
          <a href="dashboard.html" class="icon-btn" title="Dashboard">
            <span class="material-icons-outlined">dashboard</span>
          </a>
          <button
            class="icon-btn"
            id="dark-mode-toggle"
            title="Toggle Dark Mode"
          >
            <span class="material-icons-outlined">dark_mode</span>
          </button>
          <button class="icon-btn" title="Settings">
            <span class="material-icons-outlined">settings</span>
          </button>
        </div>

        <div class="user-profile">
          <img src="https://i.pravatar.cc/32?img=12" alt="You" />
        </div>
      </div>
    </header>

    <div id="app">
      <!-- Left Toolbar -->
      <div id="toolbar-left">
        <button
          id="select"
          class="btn-tool"
          title="Select (V)"
          data-tool="select"
        >
          <svg
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <path d="M3 3l7.07 16.97 2.51-7.39 7.39-2.51L3 3z" />
          </svg>
        </button>
        <button id="pen" class="btn-tool" title="Pen (P)" data-tool="pen">
          <span class="material-icons-outlined">edit</span>
        </button>

        <!-- Pen/Color Menu (Floating next to tool) -->
        <div id="pen-menu" class="tool-flyout hidden">
          <!-- Reuse existing color picker structure -->
          <div class="color-picker">
            <div
              class="color-swatch active"
              data-color="#000000"
              style="background: #000"
            ></div>
            <div
              class="color-swatch"
              data-color="#ef4444"
              style="background: #ef4444"
            ></div>
            <div
              class="color-swatch"
              data-color="#3b82f6"
              style="background: #3b82f6"
            ></div>
            <div
              class="color-swatch"
              data-color="#10b981"
              style="background: #10b981"
            ></div>
            <label class="color-swatch custom-color-label" title="Custom Color">
              <input
                id="custom-color-picker"
                type="color"
                style="opacity: 0; width: 100%; height: 100%; cursor: pointer"
              />
              <span
                class="material-icons-outlined"
                style="
                  font-size: 16px;
                  position: absolute;
                  top: 50%;
                  left: 50%;
                  transform: translate(-50%, -50%);
                  pointer-events: none;
                "
                >colorize</span
              >
            </label>
          </div>
          <input
            id="pen-size-slider"
            type="range"
            min="1"
            max="20"
            value="3"
            class="slider-mini"
          />
        </div>

        <button id="eraser" class="btn-tool" title="Eraser" data-tool="eraser">
          <span class="material-icons-outlined">auto_fix_normal</span>
        </button>
        <div id="eraser-menu" class="tool-flyout hidden">
          <label>Size</label>
          <input
            id="eraser-size-slider"
            type="range"
            min="5"
            max="50"
            value="20"
          />
        </div>

        <button
          id="add-card"
          class="btn-tool"
          title="Shape/Card"
          data-tool="card"
        >
          <span class="material-icons-outlined">crop_din</span>
        </button>
        <button
          id="add-note"
          class="btn-tool"
          title="Sticky Note (N)"
          data-tool="note"
        >
          <span class="material-icons-outlined">note</span>
        </button>
        <button
          id="add-text"
          class="btn-tool"
          title="Text (T)"
          data-tool="text"
        >
          <span class="material-icons-outlined">title</span>
        </button>
        <div id="text-menu" class="tool-flyout hidden">
          <select
            id="font-family"
            style="
              padding: 4px;
              border-radius: 4px;
              border: 1px solid var(--border-color);
              width: 100%;
            "
          >
            <option value="'Inter', sans-serif">Inter</option>
            <option value="'Kalam', cursive">Marker</option>
            <option value="'Courier New', monospace">Mono</option>
            <option value="serif">Serif</option>
          </select>
          <input
            id="font-size-input"
            type="number"
            min="12"
            max="100"
            value="24"
            style="padding: 4px; width: 100%"
          />
          <button
            id="place-text-btn"
            class="btn-primary"
            style="width: 100%; font-size: 0.8rem; padding: 4px"
          >
            Add
          </button>
        </div>

        <label class="btn-tool file-btn" title="Image">
          <span class="material-icons-outlined">image</span>
          <input id="file" type="file" hidden />
        </label>

        <button
          id="pan-tool"
          class="btn-tool active"
          title="Pan Hand (H)"
          data-tool="pan"
        >
          <span class="material-icons-outlined">pan_tool</span>
        </button>

        <div
          style="
            height: 1px;
            background: var(--border-color);
            margin: 0.25rem 0;
          "
        ></div>

        <button
          id="clear"
          class="btn-tool"
          title="Clear Board"
          style="color: #ef4444"
        >
          <span class="material-icons-outlined">delete_outline</span>
        </button>
      </div>

      <!-- Main Board Area -->
      <div id="board-wrap">
        <div id="viewport">
          <canvas id="board"></canvas>
          <div id="files-layer"></div>
        </div>

        <!-- Bottom Center Toolbar (Zoom/Export) -->
        <div id="bottom-bar">
          <button id="zoom-out" class="icon-btn-small">
            <span class="material-icons-outlined">remove</span>
          </button>
          <span id="zoom-val">100%</span>
          <button id="zoom-in" class="icon-btn-small">
            <span class="material-icons-outlined">add</span>
          </button>
          <div
            class="divider-v"
            style="height: 16px; margin: 0 0.5rem; opacity: 0.2"
          ></div>
          <button id="export-btn" class="btn-secondary-sm">
            <span
              class="material-icons-outlined"
              style="font-size: 16px; margin-right: 4px"
              >download</span
            >
            Export
          </button>
        </div>
      </div>

      <!-- Right Sidebar (Fixed) -->
      <aside id="sidebar-right">
        <!-- Shared Notes Section -->
        <div class="sidebar-section active">
          <div class="section-title">
            <span class="material-icons-outlined" style="color: #2563eb"
              >description</span
            >
            Shared Notes
            <span
              class="material-icons-outlined ms-auto"
              style="font-size: 16px; opacity: 0.5"
              >open_in_full</span
            >
          </div>
          <textarea
            id="shared-notes-area"
            class="notes-content"
            style="
              width: 100%;
              height: 200px;
              border: none;
              outline: none;
              resize: none;
              background: transparent;
              font-family: &quot;Inter&quot;, sans-serif;
              font-size: 0.9rem;
              line-height: 1.5;
              color: var(--text-main);
            "
            placeholder="Type shared notes here..."
          ></textarea>
        </div>

        <!-- Divider -->
        <div class="sidebar-divider"></div>

        <!-- Chat Section -->
        <div class="sidebar-section chat-section">
          <div class="section-title">
            <span class="material-icons-outlined" style="color: #2563eb"
              >chat</span
            >
            Team Chat
            <div class="status-dot"></div>
            <span class="text-xs text-muted ms-auto">12 Active</span>
          </div>

          <div id="messages">
            <!-- Messages will appear here -->
          </div>

          <div id="chat-input-area">
            <button class="icon-btn-xs">
              <span class="material-icons-outlined">attach_file</span>
            </button>
            <input id="chat-input" placeholder="Type a message..." />
            <button id="send-msg" class="btn-primary-icon">
              <span class="material-icons-outlined">send</span>
            </button>
          </div>
        </div>
      </aside>
    </div>

    <!-- Hidden compatibility inputs for board.js -->
    <input id="color" type="hidden" value="#000000" />
    <input id="username" type="hidden" value="" />

    <!-- Socket.io Client -->
    <script src="https://cdn.socket.io/4.7.4/socket.io.min.js"></script>
    <script src="js/board.js"></script>
    <script>
      // Inline script to handle simple UI toggles for the redesign demo
      document
        .getElementById("dark-mode-toggle")
        .addEventListener("click", () => {
          document.body.classList.toggle("dark-mode");
        });

      // Ensure new Select tool works with existing logic if possible,
      // or just rely on 'pen' being default for now.
    </script>
  </body>
</html>
